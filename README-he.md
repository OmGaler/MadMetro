[![en](https://img.shields.io/badge/lang-en-red.svg)](https://github.com/OmGaler/MadMetro/blob/master/README.md)

# מַדְמטרו: מדמה תחב\"צ באזור גוש דן

## סקירה כללית

מַדְמטרו הוא כלי סימולציה והדמיה אינטראקטיבי (מַדְמֶה), מבוסס דפדפן, המדמה את מערכת הסעת המונים העתידית באזור המטרופולין תל אביב-גוש דן. הסימולטור מציג הפעלות של קווי מטרו ורכבת קלה עם תנועות רכבות דינמיות, הדמיות של מסלולים ותחנות ותזמונים ניתנים להגדרה. מַדְמטרו נותן הצצה לעתיד השאפתני הזה, ומדגים כיצד המערכת עשויה לפעול.

## רקע

אזור המטרופולין תל אביב-גוש דן הוא האזור הצפוף והמאוכלס ביותר בישראל, ובשנת 2040 מערכת הסעת ההמונים של גוש דן צפויה לכלול 3 קווי רכבת קלה ו-3 קווי מטרו. קווי המטרו בלבד יכללו 109 תחנות על פני 150 ק"מ של מסילה, והמערכת כולה צפויה לשרת כ-4 מיליון נוסעים ביום.

## תכונות

- **הדמיית כלל הרשת:** הדמיה מלאה של מערכת התחבורה המונית המתוכננת בגוש דן, הכוללת את כל קווי המטרו והרכבת הקלה.
- **סימולציה בזמן אמת של תחבורה:** הדמיה דינמית של רכבי מטרו ורכבת קלה בתנועה לאורך מסלולם, בהתאם לתזמונים ודפוסי עצירה מציאותיים.
- **ממשק מפה אינטראקטיבי:** ניווט קל עם אפשרויות הזזה (פאן) והתקרבות/התרחקות (זום) באמצעות העכבר או מחוות מגע.
- **מידע מפורט על רכבות:** קבלת פרטי מסלול, התחנה הבאה והיעד על ידי לחיצה על כל רכבת.
- **מצב נווט**: מספק הערכות לזמני נסיעה ומסלול מיתבי, כולל פרטי החלפות, בין כל שתי תחנות במערכת.
- **הגדרות סימולציה :** כוונון מהירות הסימולציה, פרמטרי תזמון ואפשרויות תצוגה.
- **תמיכה רב-לשונית:** החלפה בין ממשקי אנגלית לעברית.

## צילומי מסך

<img src="./screenshots/MadMetro-1.png" alt="screenshot-1" width="750">
<img src="./screenshots/MadMetro-2.png" alt="screenshot-2" width="750">
<img src="./screenshots/MadMetro-3.png" alt="screenshot-3" width="750">
<img src="./screenshots/MadMetro-4.png" alt="screenshot-3" width="750">

![animated-gif](screenshots/MadMetro.gif)

## שימוש

‏1. **נסו אותו באינטרנט (מומלץ)**

> הדרך הקלה ביותר לנסות את מדמטרו היא דרך GitHub Pages:
> [הפעל את מדמטרו](https://omgaler.github.io/MadMetro/)

‏‏2. **הפעלה מקומית**

   שכפלו את הריפו:
```
git clone https://github.com/OmGaler/MadMetro.git
```

נווטו לספריית הפרויקט:

```
cd MadMetro
```

הפעילו את המדמה:

- פתחו את ```index.html``` בדפדפן שלכם.
- או לחלופין, הפעילו שרת מקומי (למשל, באמצעות Python):

```
  python -m http.server 8040
```

לאחר מכן, פתחו את http://localhost:8040 בדפדפן.

### תאימות

מדמטרו תואם לרוב הדפדפנים המרכזיים, הן במחשבים נייחים והן במכשירים ניידים, כולל Chrome ו-Safari. כדי לקבל ביצועים מיטביים וחוויית שימוש הטובה ביותר, ודאו שאתם משתמשים בגרסה עדכנית של הדפדפן שלכם.

### שימוש במדמה

- **ניווט במפה:** לחץ וגרור להזזה, והשתמש בגלגל העכבר או במחוות מגע כדי לבצע זום.
- **בקרות סימולציה:**
- השהה/הפעל: השתמשו בלחצן בפינה העליונה הימנית, או לחצו על 'p' או 'space'.
- בקרת מהירות: כווננו את מהירות הסימולציה ואפשרויות נוספות בהגדרות.
- **מידע על רכבות:** לחצו על כל רכבת כדי לראות את מסלולה, התחנה הבאה והיעד.
- **קונפיגורציית לוח זמנים:** שנו את יום השירות (בין יום חול לסוף שבוע) ואת פרק הזמן בהגדרות כדי לצפות ברמות שירות אמיתיות.
- **מצב נווט**: הפעל את מצב נווט על ידי לחיצה על סמל המצפן או לחיצה על 'W'. לאחר מכן, בחר בשתי תחנות על המפה או השתמש בתפריטי הבחירה כדי לקבל זמן נסיעה משוער ומידע מפורט על המסלול, כולל החלפות.​
- **שפה:** החליפו בין ממשקי אנגלית לעברית באמצעות סמל הגלובוס.

## מקורות נתונים

- **נתונים גאוגרפיים:** מיקומי תחנות והתאמות מסלולים שמקורם ב-[geo.mot.gov.il](https://geo.mot.gov.il) ובמאגרי מידע ציבוריים נוספים.
- **מפת בסיס:** אריחי המפה והנתונים מסופקים על ידי [OpenStreetMap.org](https://www.openstreetmap.org/).
- **עיבוד נתונים:** כל הנתונים עובדו מראש ואופטימליים למטרות סימולציה.

## פיזיקה וניתוב

### הקצאת רכבות ותדירות  
מספר הרכבות בכל קו מחושב על פי:  
- מהירות ממוצעת של הקו, מוערכת לאורך המסלול כולו  
- מרווחים הנדרשים בין רכבות
- אורך המסלול הכולל וזמני הנסיעה הלוך ושוב המצופים  

### הערכות זמן נסיעה

זמן הנסיעה של כל קטע מחושב תוך התייחסות לעד שלושה שלבים:  

- **שלב ההאצה:** הזמן (והמרחק) הדרושים לרכבת להגיע למהירות המרבית תוך שימוש בקצבי האצה מוגדרים  
- **שלב השיוט:** הזמן שבו הנסיעה מתבצעת במהירות מרבית כאשר אורך הקטע מאפשר זאת  
- **שלב ההאטה:** הזמן (והמרחק) הדרושים לרכבת להאט ולהתייצב בתחנה הבאה  

זמני הנסיעה המחושבים מבוססים על מודלים תאורטיים של פיזיקה, והם מותאמים באמצעות מכפילים היוריסטיים והוספת זמני המתנה (dwell time) כדי להתחשב בעיכובים תפעוליים, בתהליכי עליה וירידה של נוסעים ובגורמים מציאותיים שמשפיעים על אמינות השירות. עם זאת, יש להתיחס את כל זמני הנסיעה כהערכות להמחשה בלבד.


> בשל המורכבות של מערכות תחבורה במציאות והגורמים הבלתי צפויים המשפיעים עליהן, זמני הנסיעה המחושבים עשויים לסטות באופן משמעותי מהביצועים התפעוליים בפועל.

### ניתוב ברשת  

הרשת מתוארת כגרף משוקלל שבו:  

- **צמתים (Nodes)** מייצגים תחנות  
- **צלעים (Edges)** מייצגים את הקטעים המחברים בין תחנות סמוכות, כאשר המשקל מייצג את המרחק  
- **מאפייני הצלעות** כוללים את סוג הקטע (רכבת קלה תת-קרקעית/עילית או מטרו), שקובע את פרופיל המהירות המתאים ומשפיע על חישוב זמני הנסיעה  

#### אלגוריתם הניתוב  

זמני הנסיעה והמסלולים הקצרים ביותר בין שתי תחנות מחושבים באמצעות **אלגוריתם דייקסטרה** – אלגוריתם פשוט, יעיל ואפקטיבי. האלגוריתם מחזיר את המסלול האופטימלי ואת זמן הנסיעה המשוער.  
השיטה הזו מטפלת ביעילות בטופולוגיות מורכבות של הרשת, כולל החלפות בין קווים, תוך שמירה על איזון בין יעילות חישובית לדיוק באופטימיזציית המסלול.

## הודעות סייג

> לוחות זמנים, תדירויות ומסלולים הם לצורך הדגמה והמחשה בלבד ואינם בהכרח תואמים לשירות במציאות. המדמה היא הערכה מקורבת ואינה משקפת פעולות תחבורה בזמן אמת או רשמיות באזור גוש דן.

- **דיוק:** לוחות הזמנים, התדירויות והמסלולים הם מקורבים ואינם בהכרח תואמים לשירותים המתוכננים או בפועל.
- **הערכת זמן נסיעה:** זמני הנסיעה המחושבים מבוססים על מודלים תאורטיים של פיזיקה עם התאמות מקורבות לגורמים מציאותיים. זמני נסיעה אלו הם להמחשה בלבד ועלולים להיות שונים באופן משמעותי מזמני נסיעה בפועל עקב שונות תפעולית, תקלות שירות, עומסי נוסעים וגורמים חיצוניים נוספים שמעבר להיקף המדמה.  

- **לא רשמי:** פרויקט זה אינו קשור ולא מאושר על ידי נת"ע, משרד התחבורה או כל רשות ממשלתית או תחבורתית אחרת.
- **מגבלות ביצועים:** למרות שכל המאמצים נעשו לאופטימיזציה של הביצועים, הכלי נועד למטרות חינוכיות ועלול שלא להתמודד עם מספר רב מאוד של רכבים מדומים ללא השפעות על הביצועים.
- **תבניות שמות ושירות:** שמות התחנות ותבניות השירות עשויים להשתנות ועלולים להיות שונים מגרסאות סופיות. תבניות שירות מסוימות עשויות להיות מופשטות למטרות הדמיה.
- **ייצוג מסילות**: המדמה מציג רק מסילות פעילות לנוסעים. מסילות דיור וקרפיפים, ומסילות תפעוליות אחרות אינן מוצגות.

## שאלות, דיווחי באגים ובקשות לתכונות

אם יש לכם שאלות, נתקלתם בבאג, או שאתם מעוניינים להציע תכונה חדשה, אנא פתחו דיון ב-GitHub:  
[GitHub Issues](https://github.com/OmGaler/MadMetro/issues)

## רישיון

פרויקט זה מורשה בהתאם לתנאים המתוארים בקובץ [LICENSE](https://github.com/OmGaler/MadMetro/blob/master/LICENSE.md).
